syntax = "proto3";
package croupier.component.v1;
option java_package = "io.github.cuihairu.croupier.component.v1";
option java_multiple_files = true;

import "google/protobuf/descriptor.proto";
import "croupier/component/v1/dashboard_ui.proto";

option go_package = "github.com/cuihairu/croupier/sdks/go/pkg/pb/croupier/component/v1;componentv1";

// æ–¹æ³•çº§å…ƒä¿¡æ¯ï¼ˆå¯é€‰ï¼‰ã€‚æ’ä»¶æœªè¯†åˆ«æ—¶å°†ä½¿ç”¨é»˜è®¤æ¨æ–­ã€?
message FunctionOptions {
  // å…¨å±€å”¯ä¸€å‡½æ•°IDï¼ˆé»˜è®¤ï¼š<package>.<service>.<method> è½¬å°å†™ï¼‰
  string function_id = 1;
  // ç‰ˆæœ¬ï¼ˆé»˜è®?1.0.0ï¼?
  string version = 2;
  // ç±»ç›®ï¼ˆé»˜è®¤å– package é‡Œçš„ç¬¬äºŒçº§ï¼Œå¦?games.player.v1 â†?playerï¼?
  string category = 3;
  // é£é™©çº§åˆ«ï¼šlow/medium/highï¼ˆé»˜è®?mediumï¼?
  string risk = 4;
  // è·¯ç”±ç­–ç•¥ï¼šlb/broadcast/targeted/hashï¼ˆé»˜è®?lbï¼?
  string route = 5;
  // è¶…æ—¶ï¼ˆé»˜è®?30sï¼?
  string timeout = 6;
  // ä¸¤äººå®¡æ‰¹ï¼ˆé»˜è®?falseï¼?
  bool two_person_rule = 7;
  // æ”¾ç½®ä½ç½®ï¼šcore/agentï¼ˆé»˜è®?agentï¼?
  string placement = 8;
  // é¢å¤–æ ‡ç­¾
  map<string,string> labels = 9;
  // è°ƒç”¨æ¨¡å¼ï¼šquery/commandï¼ˆé»˜è®?queryï¼?
  string mode = 10;
  // æ˜¯å¦å¯ç”¨å¹‚ç­‰é”®ï¼ˆé»˜è®¤ falseï¼?
  bool idempotency_key = 11;

  // ========== å±•ç¤º & æƒé™ï¼ˆUI/èœå•/æƒé™ï¼Œå¼ºç±»å‹å®šä¹‰ï¼?==========
  // å±•ç¤ºåç§°ä¸æ‘˜è¦ï¼ˆi18nï¼?
  croupier.component.v1.I18nText display_name = 12;
  croupier.component.v1.I18nText summary      = 13;
  // æ ‡ç­¾
  repeated string tags = 14;
  // èœå•å…ƒæ•°æ®ï¼ˆç”¨äºæ„å»ºå‰ç«¯èœå•ï¼?
  croupier.component.v1.Menu menu = 15;
  // æƒé™è§„èŒƒï¼ˆverbs/scopes/default role grants/i18nï¼?
  croupier.component.v1.PermissionSpec permissions = 16;
}

// æ¶ˆæ¯çº§å…ƒä¿¡æ¯ï¼Œç”¨äºæ ‡è®°å®ä½“ç±»å‹å¹¶ç”Ÿæˆ entity æè¿°ç¬?
message EntityOptions {
  // å®ä½“IDï¼ˆé»˜è®¤ï¼š<package>.<message> è½¬å°å†™ï¼‰
  string entity_id = 1;
  // ç‰ˆæœ¬ï¼ˆé»˜è®?1.0.0ï¼?
  string version = 2;
  // å®ä½“åç§°ï¼ˆé»˜è®¤ä½¿ç”?message åç§°ï¼?
  string name = 3;
  // æè¿°
  string description = 4;
  // ç±»ç›®ï¼ˆé»˜è®¤å– package é‡Œçš„ç¬¬äºŒçº§ï¼‰
  string category = 5;
  // ä¸»é”®å­—æ®µï¼ˆé»˜è®¤å–ç¬¬ä¸€ä¸?string ç±»å‹çš„å­—æ®µï¼‰
  string primary_key = 6;
  // æ˜¾ç¤ºå­—æ®µï¼ˆç”¨äº?UI å±•ç¤ºï¼?
  string display_field = 7;
  // æ ‡é¢˜æ¨¡æ¿ï¼ˆæ”¯æŒ?{field_name} å ä½ç¬¦ï¼‰
  string title_template = 8;
  // å¤´åƒå­—æ®µ
  string avatar_field = 9;
  // çŠ¶æ€å­—æ®?
  string status_field = 10;

  // æ“ä½œæ˜ å°„ï¼ˆå°† CRUD æ“ä½œæ˜ å°„åˆ°å…·ä½“çš„å‡½æ•° IDï¼?
  // åˆ›å»ºæ“ä½œçš„å‡½æ•°IDåˆ—è¡¨
  repeated string create_functions = 11;
  // è¯»å–æ“ä½œçš„å‡½æ•°IDåˆ—è¡¨
  repeated string read_functions = 12;
  // æ›´æ–°æ“ä½œçš„å‡½æ•°IDåˆ—è¡¨
  repeated string update_functions = 13;
  // åˆ é™¤æ“ä½œçš„å‡½æ•°IDåˆ—è¡¨
  repeated string delete_functions = 14;
  // åˆ—è¡¨æ“ä½œçš„å‡½æ•°IDåˆ—è¡¨
  repeated string list_functions = 15;
  // è‡ªå®šä¹‰æ“ä½œï¼ˆkey: æ“ä½œå? value: å‡½æ•°IDåˆ—è¡¨ï¼?
  map<string, string> custom_operations = 16;

  // å®ä½“å±•ç¤ºé…ç½®ï¼ˆi18nï¼?
  croupier.component.v1.I18nText display_name = 17;
  croupier.component.v1.I18nText summary = 18;
  // æ ‡ç­¾
  repeated string tags = 19;
  // èœå•å…ƒæ•°æ®ï¼ˆç”¨äºæ„å»ºå‰ç«¯èœå•ï¼?
  croupier.component.v1.Menu menu = 20;
}

extend google.protobuf.MethodOptions {
  FunctionOptions function = 51001;
}

extend google.protobuf.MessageOptions {
  EntityOptions entity = 51002;
}
